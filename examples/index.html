<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solv.us Stage</title>

</head>

<body>

    <video class="screen" id="screen" loop playsinline preload="auto">
        <source id="source" src="" type="video/mp4">
    </video>
    

    <script src="../dist/solvus-client.js"></script>
    <!-- <script src="./js/requestInterval.js"></script>
    <script src="./js/socket.io.js"></script>
    <script src="./js/timesync.js"></script>
    <script src="./js/smpte.js"></script>
    <script src="./js/Clock.js"></script>
    <script src="./js/Client.js"></script> -->

    <script>
        let stageId = new URLSearchParams(document.location.search.substring(1)).get("id");
        let client = new SolvusClient(stageId);

        // // Get the Stage ?id= parameter from the url.
        // let params = new URLSearchParams(document.location.search.substring(1));
        // let stageId = params.get("id");

        // // Connect to server
        // let serverURI = location.protocol + '//'+ window.location.host;
        // const socket = io(serverURI + '/client');
        // const timeSocket = io(serverURI + '/time');

        // let client = new Client(socket, stageId);

        // // Setup timesync
        // let ts = timesync.create({
        //     server: timeSocket,
        //     interval: 50
        // });

        // ts.send = function (socket, data, timeout) {
        //     //console.log('send', data);
        //     return new Promise(function (resolve, reject) {
        //         var timeoutFn = setTimeout(reject, timeout);

        //         socket.emit('timesync', data, function () {
        //             clearTimeout(timeoutFn);
        //             resolve();
        //         });
        //     });
        // };
        // timeSocket.on('timesync', function (data) {
        //     ts.receive(null, data);
        // });

    </script>
</body>
</html>